<!DOCTYPE html>
<html>
    <head>
        <title>CodeMirror</title>
        <script src="codemirror\lib\codemirror.js"></script>
        <link href="codemirror\lib\codemirror.css" rel="stylesheet"/>
        <script src="codemirror/mode/javascript/javascript.js"></script>
        <script src="codemirror/addon/edit/closebrackets.js"></script>
        <link href="codemirror/theme/isotope.css" rel="stylesheet"/>
        <script src="codemirror/addon/display/fullscreen.js"></script>
        <link href="codemirror/addon/display/fullscreen.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.6.1/socket.io.js" integrity="sha512-xbQU0+iHqhVt7VIXi6vBJKPh3IQBF5B84sSHdjKiSccyX/1ZI7Vnkt2/8y8uruj63/DVmCxfUNohPNruthTEQA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        
    </head>
    <body>
        <textarea id="editor"></textarea>
        <script>
            var editor = CodeMirror.fromTextArea
            (document.getElementById('editor'), {
                mode: "javascript",
                theme: "isotope",
                lineNumbers: true,
                autoCloseBrackets: true,
                fullScreen: true, 
            });
           
        </script>
        <script>
            // Connect to the Socket.io server
            const socket = io();
        

        
            // Listen for changes to the code
            socket.on('code-update', (code) => {
            console.log(code)
            editor.setValue(code)
          })

          editor.on('change', (instance, changes) => {
            const { origin } = changes
            if (origin !== 'setValue') {
              socket.emit('code-change', instance.getValue())
            }
          })
          editor.on('cursorActivity', (instance) => {})
        </script>
    </body>
</html>